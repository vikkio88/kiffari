<script>
  import { Link, navigate } from "svelte-routing";
  import { LOGIN_TOKEN_KEY } from "../const";
  import { appConfig, userToken } from "../store";

  function logout() {
    $userToken = null;
    window.localStorage.removeItem(LOGIN_TOKEN_KEY);
    navigate("/login", { replace: true });
  }
</script>

{#if $userToken !== null}
  <nav>
    {#if !$appConfig.kiffari}
      <Link to="/" title="Dashboard">ğŸª£</Link>
    {:else}
      <Link to="/kato" title="Kato">ğŸª£</Link>
      <Link to="/kiffari" title="Kiffari">ğŸ«</Link>
    {/if}
    <Link to="/archived-notes" title="Archived Notes">ğŸ—„ï¸</Link>
    <Link to="/search" title="Search">ğŸ”</Link>
    <button on:click={logout} title="Logout" class="logout">ğŸ‘‹</button>
  </nav>
{/if}

<style>
  nav > button.logout {
    position: absolute;
    right: 0;
    margin: 1rem 1rem 0 0;
  }
</style>
